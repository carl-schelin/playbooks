#!/bin/ksh

# Run the machinfo utility to get a snapshot of HP-UX hardware details

#BASENAME=$(basename "${0}")
DIRNAME=$(dirname "${0}")

if [[ ! -f ${DIRNAME}/../.config ]]
then
  echo "Unable to locate ${DIRNAME}/../.config. Exiting."
  exit 1
fi

# Source the configuration file
. "${DIRNAME}"/../.config

ID=$(id | cut -f1 -d\( | cut -f2 -d=)

if [[ ! $ID = 0 ]]
then
  echo "You must be root to run this script"
  exit 1
fi

if [[ -f ${SCRIPTS_LOGS}/machinfo.output ]]
then
  rm ${SCRIPTS_LOGS}/machinfo.output
fi

if [[ $OS = "HP-UX" ]]
then
  if [[ -f /usr/contrib/bin/machinfo ]]
  then
    /usr/contrib/bin/machinfo > ${SCRIPTS_LOGS}/machinfo.output 2>&1
  else
    echo "Unable to locate machinfo" > ${SCRIPTS_LOGS}/machinfo.output
  fi
fi

exit 0

