#!/bin/ksh

# update.gecos
# Carl Schelin
# Update the GECOS field for users with accurate information.

INTRADO=/opt/intrado

for i in `grep -v "^#" $INTRADO/etc/valid.email | cut -f1 -d:`
do
  egrep "^${i}:" /etc/passwd
  if [[ $? = 0 ]]
  then
    EMAIL=`grep "^${i}:" $INTRADO/etc/valid.email | cut -f2 -d:`
    usermod -c "${EMAIL}" ${i}
    egrep "^${i}:" /etc/passwd
  fi
done

